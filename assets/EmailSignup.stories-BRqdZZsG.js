import{j as F}from"./jsx-runtime-BjgbQsUx.js";import{r as p}from"./index-D-deEim2.js";import{S as B}from"./StatusMessage-Be8FeD9y.js";import{E as ee}from"./EmailSignupForm-CYS1T0UB.js";import{g as te}from"./_commonjsHelpers-CqkleIqs.js";import"./index-D2MAbzvX.js";import"./Button-DPsXYv_M.js";import"./clsx-B-dksMZM.js";import"./Checkbox-CwyvqRMq.js";import"./DropList-Dfr_QFCq.js";import"./InputField-C3SMEbZ-.js";const re="/api/signup";class ae{async get(t,u){try{const r=await fetch(t,{...u}),n=await r.json();return{status:r.ok?"success":"error",message:n.message||r.statusText,data:n.data}}catch(r){return{status:"error",message:r instanceof Error?r.message:"An error occurred"}}}async post(t,u){try{const r=await fetch(t,{method:"POST",...u}),n=await r.json();return{status:r.ok?"success":"error",message:n.message||r.statusText,data:n.data}}catch(r){return{status:"error",message:r instanceof Error?r.message:"An error occurred"}}}}const se=new ae;function ne(){const[a,t]=p.useState(null),[u,r]=p.useState(!1),[n,s]=p.useState(null);return{data:a,done:u,error:n,postFormData:async(e,f)=>{try{const i=await se.post(e,{body:f,headers:{"Content-Type":"application/x-www-form-urlencoded"}});t(i),r(!0),s(null)}catch(i){s(i instanceof Error?i.message:"An error occurred"),r(!0)}}}}var S={exports:{}},E={exports:{}},Q;function N(){return Q||(Q=1,function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function u(n){"@babel/helpers - typeof";return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},u(n)}function r(n){var s=typeof n=="string"||n instanceof String;if(!s){var o=u(n);throw n===null?o="null":o==="object"&&(o=n.constructor.name),new TypeError("Expected a string but received a ".concat(o))}}a.exports=t.default,a.exports.default=t.default}(E,E.exports)),E.exports}var D={exports:{}},W;function le(){return W||(W=1,function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var u=r(N());function r(o){return o&&o.__esModule?o:{default:o}}function n(o){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(o)}function s(o,e){(0,u.default)(o);var f,i;n(e)==="object"?(f=e.min||0,i=e.max):(f=arguments[1],i=arguments[2]);var c=encodeURI(o).split(/%..|./).length-1;return c>=f&&(typeof i>"u"||c<=i)}a.exports=t.default,a.exports.default=t.default}(D,D.exports)),D.exports}var q={exports:{}},I={exports:{}},T;function H(){return T||(T=1,function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;function u(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;for(var s in n)typeof r[s]>"u"&&(r[s]=n[s]);return r}a.exports=t.default,a.exports.default=t.default}(I,I.exports)),I.exports}var G;function ue(){return G||(G=1,function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var u=n(N()),r=n(H());function n(e){return e&&e.__esModule?e:{default:e}}var s={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function o(e,f){(0,u.default)(e),f=(0,r.default)(f,s),f.allow_trailing_dot&&e[e.length-1]==="."&&(e=e.substring(0,e.length-1)),f.allow_wildcard===!0&&e.indexOf("*.")===0&&(e=e.substring(2));var i=e.split("."),c=i[i.length-1];return f.require_tld&&(i.length<2||!f.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(c)||/\s/.test(c))||!f.allow_numeric_tld&&/^\d+$/.test(c)?!1:i.every(function(d){return!(d.length>63&&!f.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(d)||/[\uff01-\uff5e]/.test(d)||/^-|-$/.test(d)||!f.allow_underscores&&/_/.test(d))})}a.exports=t.default,a.exports.default=t.default}(q,q.exports)),q.exports}var P={exports:{}},V;function ie(){return V||(V=1,function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var u=r(N());function r(c){return c&&c.__esModule?c:{default:c}}var n="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",s="(".concat(n,"[.]){3}").concat(n),o=new RegExp("^".concat(s,"$")),e="(?:[0-9a-fA-F]{1,4})",f=new RegExp("^("+"(?:".concat(e,":){7}(?:").concat(e,"|:)|")+"(?:".concat(e,":){6}(?:").concat(s,"|:").concat(e,"|:)|")+"(?:".concat(e,":){5}(?::").concat(s,"|(:").concat(e,"){1,2}|:)|")+"(?:".concat(e,":){4}(?:(:").concat(e,"){0,1}:").concat(s,"|(:").concat(e,"){1,3}|:)|")+"(?:".concat(e,":){3}(?:(:").concat(e,"){0,2}:").concat(s,"|(:").concat(e,"){1,4}|:)|")+"(?:".concat(e,":){2}(?:(:").concat(e,"){0,3}:").concat(s,"|(:").concat(e,"){1,5}|:)|")+"(?:".concat(e,":){1}(?:(:").concat(e,"){0,4}:").concat(s,"|(:").concat(e,"){1,6}|:)|")+"(?::((?::".concat(e,"){0,5}:").concat(s,"|(?::").concat(e,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function i(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,u.default)(c),d=String(d),d?d==="4"?o.test(c):d==="6"?f.test(c):!1:i(c,4)||i(c,6)}a.exports=t.default,a.exports.default=t.default}(P,P.exports)),P.exports}var X;function oe(){return X||(X=1,function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=C;var u=e(N()),r=e(le()),n=e(ue()),s=e(ie()),o=e(H());function e(m){return m&&m.__esModule?m:{default:m}}var f={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},i=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,c=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,d=/^[a-z\d]+$/,R=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,$=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,_=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,x=254;function y(m){var l=m.replace(/^"(.+)"$/,"$1");if(!l.trim())return!1;var b=/[\.";<>]/.test(l);if(b){if(l===m)return!1;var v=l.split('"').length===l.split('\\"').length;if(!v)return!1}return!0}function C(m,l){if((0,u.default)(m),l=(0,o.default)(l,f),l.require_display_name||l.allow_display_name){var b=m.match(i);if(b){var v=b[1];if(m=m.replace(v,"").replace(/(^<|>$)/g,""),v.endsWith(" ")&&(v=v.slice(0,-1)),!y(v))return!1}else if(l.require_display_name)return!1}if(!l.ignore_max_length&&m.length>x)return!1;var L=m.split("@"),h=L.pop(),w=h.toLowerCase();if(l.host_blacklist.includes(w)||l.host_whitelist.length>0&&!l.host_whitelist.includes(w))return!1;var g=L.join("@");if(l.domain_specific_validation&&(w==="gmail.com"||w==="googlemail.com")){g=g.toLowerCase();var j=g.split("+")[0];if(!(0,r.default)(j.replace(/\./g,""),{min:6,max:30}))return!1;for(var O=j.split("."),M=0;M<O.length;M++)if(!d.test(O[M]))return!1}if(l.ignore_max_length===!1&&(!(0,r.default)(g,{max:64})||!(0,r.default)(h,{max:254})))return!1;if(!(0,n.default)(h,{require_tld:l.require_tld,ignore_max_length:l.ignore_max_length,allow_underscores:l.allow_underscores})){if(!l.allow_ip_domain)return!1;if(!(0,s.default)(h)){if(!h.startsWith("[")||!h.endsWith("]"))return!1;var U=h.slice(1,-1);if(U.length===0||!(0,s.default)(U))return!1}}if(g[0]==='"')return g=g.slice(1,g.length-1),l.allow_utf8_local_part?_.test(g):R.test(g);for(var Y=l.allow_utf8_local_part?$:c,z=g.split("."),k=0;k<z.length;k++)if(!Y.test(z[k]))return!1;return!(l.blacklisted_chars&&g.search(new RegExp("[".concat(l.blacklisted_chars,"]+"),"g"))!==-1)}a.exports=t.default,a.exports.default=t.default}(S,S.exports)),S.exports}var fe=oe();const ce=te(fe),me=a=>{const t={};let u="",r=!0;return(!a||a.firstName.trim().length===0)&&(r=!1,t.firstName="First name cannot be empty."),(!a||a.lastName.trim().length===0)&&(r=!1,t.lastName="Last name cannot be empty."),(!a||!ce(a.email))&&(r=!1,t.email="Looks like this is not an email."),(!a||a.email.trim().length===0)&&(r=!1,t.email="Email cannot be empty."),(!a||a.available.trim().length===0)&&(r=!1,t.available="Available cannot be empty."),(!a||a.advances?.trim().length===0&&a.alerts?.trim().length===0&&a.other?.trim().length===0)&&(r=!1,t.other="At least one of the checkbox options is required."),r||(u="Form contains errors."),{success:r,message:u,errors:t}},Z={firstName:"",lastName:"",email:"",orgname:"",available:"",advances:"yes",alerts:"",other:""},J=()=>{const{done:a,data:t,error:u,postFormData:r}=ne(),[n,s]=p.useState(Z),[o,e]=p.useState({}),[f,i]=p.useState(!1),c=()=>{s(Z),e({}),i(!1)},d=p.useCallback(_=>{s(x=>({...x,[_.target.name]:_.target.value}))},[]),R=p.useCallback(_=>{s(x=>({...x,[_.target.name]:_.target.checked?_.target.value:""}))},[]),$=async _=>{_.preventDefault();const x=me(n);if(x.success){i(!0),e(x.errors);const y=new FormData;Object.entries(n).forEach(C=>{const[m,l]=C;y.set(m,l)}),await r(re,y),c()}else e({...x.errors,form:x.message}),i(!1)};return F.jsxs("div",{className:"mx-auto max-w-lg",children:[a&&t&&F.jsx(B,{type:t.status==="success"?"success":"error",message:t.message}),u&&F.jsx(B,{type:"error",message:u}),F.jsx(ee,{onFormSubmit:$,onInputChange:d,onCheckboxChange:R,fields:n,errors:o,loading:f})]})};J.__docgenInfo={description:"",methods:[],displayName:"EmailSignupFormContainer"};const K=()=>F.jsx("div",{className:"px-4 py-8 md:px-6 lg:px-8",children:F.jsx(J,{})});K.__docgenInfo={description:"",methods:[],displayName:"EmailSignup"};const Se={title:"Pages/EmailSignup",component:K,parameters:{layout:"fullscreen"}},A={args:{}};A.parameters={...A.parameters,docs:{...A.parameters?.docs,source:{originalSource:`{
  args: {}
}`,...A.parameters?.docs?.source}}};const Ee=["Default"];export{A as Default,Ee as __namedExportsOrder,Se as default};
